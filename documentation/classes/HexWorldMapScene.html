<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>ng-hexa documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">ng-hexa documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">
















<ol class="breadcrumb">
  <li class="breadcrumb-item">Classes</li>
  <li class="breadcrumb-item" >HexWorldMapScene</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/three/scenes/hex-world-map.scene.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>A simple &quot;world map&quot; prototype: big bright-green hex grid on black background with drag-pan.
Camera is tilted to mimic a Google-Earth style 2.5D perspective while staying on a flat plane.</p>

            </p>


            <p class="comment">
                <h3>Implements</h3>
            </p>
            <p class="comment">
                            <code><a href="../interfaces/ThreeSceneController.html" target="_self" >ThreeSceneController</a></code>
            </p>


            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#camera" >camera</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#canvas" >canvas</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#dragging" >dragging</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#dragLastPoint" >dragLastPoint</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#dragPointerId" >dragPointerId</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#ground" >ground</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Optional</span>
                                <a href="#hexLines" >hexLines</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#iconMaterials" >iconMaterials</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Optional</span>
                                <a href="#labelsGroup" >labelsGroup</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Optional</span>
                                <a href="#onPointerDown" >onPointerDown</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Optional</span>
                                <a href="#onPointerMove" >onPointerMove</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Optional</span>
                                <a href="#onPointerUp" >onPointerUp</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Optional</span>
                                <a href="#onWheel" >onWheel</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#raycaster" >raycaster</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#scene" >scene</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#target" >target</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#zoneIdToTypeId" >zoneIdToTypeId</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#zoomMaxDistance" >zoomMaxDistance</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#zoomMinDistance" >zoomMinDistance</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#buildFallbackGrid" >buildFallbackGrid</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#buildFromStaticMap" >buildFromStaticMap</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#buildTiles" >buildTiles</a>
                            </li>
                            <li>
                                <a href="#createCamera" >createCamera</a>
                            </li>
                            <li>
                                <a href="#createScene" >createScene</a>
                            </li>
                            <li>
                                <a href="#dispose" >dispose</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#ensureIconMaterial" >ensureIconMaterial</a>
                            </li>
                            <li>
                                <a href="#getMinimapState" >getMinimapState</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#handlePointerDown" >handlePointerDown</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#handlePointerMove" >handlePointerMove</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#handlePointerUp" >handlePointerUp</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#handleWheel" >handleWheel</a>
                            </li>
                            <li>
                                <a href="#init" >init</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#loadAndBuildStaticMap" >loadAndBuildStaticMap</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#pointerToGround" >pointerToGround</a>
                            </li>
                            <li>
                                <a href="#setTargetXZ" >setTargetXZ</a>
                            </li>
                            <li>
                                <a href="#update" >update</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>


            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="camera"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>camera</b></span>
                        <a href="#camera"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>THREE.PerspectiveCamera</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="12" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:12</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="canvas"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>canvas</b></span>
                        <a href="#canvas"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>HTMLCanvasElement</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="13" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:13</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dragging"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>dragging</b></span>
                        <a href="#dragging"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="19" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:19</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dragLastPoint"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>dragLastPoint</b></span>
                        <a href="#dragLastPoint"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new THREE.Vector3()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="20" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:20</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dragPointerId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>dragPointerId</b></span>
                        <a href="#dragPointerId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>number | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:21</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ground"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>ground</b></span>
                        <a href="#ground"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new THREE.Plane(new THREE.Vector3(0, 1, 0), 0)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="16" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:16</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hexLines"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Optional</span>
                        <span ><b>hexLines</b></span>
                        <a href="#hexLines"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>THREE.LineSegments</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="26" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:26</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="iconMaterials"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>iconMaterials</b></span>
                        <a href="#iconMaterials"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Map&lt;number, THREE.SpriteMaterial&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="28" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:28</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="labelsGroup"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Optional</span>
                        <span ><b>labelsGroup</b></span>
                        <a href="#labelsGroup"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>THREE.Group</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="27" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:27</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onPointerDown"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Optional</span>
                        <span ><b>onPointerDown</b></span>
                        <a href="#onPointerDown"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="31" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:31</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onPointerMove"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Optional</span>
                        <span ><b>onPointerMove</b></span>
                        <a href="#onPointerMove"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="32" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:32</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onPointerUp"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Optional</span>
                        <span ><b>onPointerUp</b></span>
                        <a href="#onPointerUp"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="33" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:33</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onWheel"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Optional</span>
                        <span ><b>onWheel</b></span>
                        <a href="#onWheel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="34" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:34</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="raycaster"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>raycaster</b></span>
                        <a href="#raycaster"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new THREE.Raycaster()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="15" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:15</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="scene"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>scene</b></span>
                        <a href="#scene"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>THREE.Scene</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="11" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:11</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="target"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>target</b></span>
                        <a href="#target"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new THREE.Vector3(0, 0, 0)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="17" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:17</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="zoneIdToTypeId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>zoneIdToTypeId</b></span>
                        <a href="#zoneIdToTypeId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Map&lt;number, number&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="29" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:29</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="zoomMaxDistance"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>zoomMaxDistance</b></span>
                        <a href="#zoomMaxDistance"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>220</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="24" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:24</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="zoomMinDistance"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>zoomMinDistance</b></span>
                        <a href="#zoomMinDistance"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>20</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="23" class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:23</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="buildFallbackGrid"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>buildFallbackGrid</b></span>
                        <a href="#buildFallbackGrid"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>buildFallbackGrid()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="183"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:183</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="buildFromStaticMap"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>buildFromStaticMap</b></span>
                        <a href="#buildFromStaticMap"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>buildFromStaticMap(map: <a href="../undefineds/StaticMap.html" target="_self">StaticMap</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="196"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:196</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>map</td>
                                            <td>
                                                            <code><a href="../miscellaneous/typealiases.html#StaticMap" target="_self" >StaticMap</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="buildTiles"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>buildTiles</b></span>
                        <a href="#buildTiles"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>buildTiles(hexRadius: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, tiles: StaticMapTile[], zones?: <a href="../undefineds/StaticMap.html" target="_self">StaticMap</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="202"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:202</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>hexRadius</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>tiles</td>
                                            <td>
                                                        <code>StaticMapTile[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>zones</td>
                                            <td>
                                                            <code><a href="../miscellaneous/typealiases.html#StaticMap" target="_self" >StaticMap</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createCamera"></a>
                    <span class="name">
                        <span ><b>createCamera</b></span>
                        <a href="#createCamera"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>createCamera(_size: <a href="../undefineds/ThreeSize.html" target="_self">ThreeSize</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="43"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:43</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>_size</td>
                                            <td>
                                                            <code><a href="../miscellaneous/typealiases.html#ThreeSize" target="_self" >ThreeSize</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>THREE.Camera</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createScene"></a>
                    <span class="name">
                        <span ><b>createScene</b></span>
                        <a href="#createScene"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>createScene()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="36"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:36</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>THREE.Scene</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dispose"></a>
                    <span class="name">
                        <span ><b>dispose</b></span>
                        <a href="#dispose"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>dispose()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="79"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:79</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ensureIconMaterial"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>ensureIconMaterial</b></span>
                        <a href="#ensureIconMaterial"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>ensureIconMaterial(zoneTypeId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="260"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:260</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>zoneTypeId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getMinimapState"></a>
                    <span class="name">
                        <span ><b>getMinimapState</b></span>
                        <a href="#getMinimapState"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getMinimapState()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="282"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:282</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Minimap API: current camera &quot;center&quot; (target) and viewport rectangle on the ground plane (y=0).</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>literal type</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handlePointerDown"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>handlePointerDown</b></span>
                        <a href="#handlePointerDown"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handlePointerDown(e: PointerEvent)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="99"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:99</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>e</td>
                                            <td>
                                                        <code>PointerEvent</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handlePointerMove"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>handlePointerMove</b></span>
                        <a href="#handlePointerMove"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handlePointerMove(e: PointerEvent)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="118"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:118</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>e</td>
                                            <td>
                                                        <code>PointerEvent</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handlePointerUp"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>handlePointerUp</b></span>
                        <a href="#handlePointerUp"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handlePointerUp(e: PointerEvent)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="136"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:136</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>e</td>
                                            <td>
                                                        <code>PointerEvent</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleWheel"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>handleWheel</b></span>
                        <a href="#handleWheel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleWheel(e: WheelEvent)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="142"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:142</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>e</td>
                                            <td>
                                                        <code>WheelEvent</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="init"></a>
                    <span class="name">
                        <span ><b>init</b></span>
                        <a href="#init"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>init(ctx: <a href="../undefineds/ThreeContext.html" target="_self">ThreeContext</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="53"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:53</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>ctx</td>
                                            <td>
                                                            <code><a href="../miscellaneous/typealiases.html#ThreeContext" target="_self" >ThreeContext</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadAndBuildStaticMap"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>loadAndBuildStaticMap</b></span>
                        <a href="#loadAndBuildStaticMap"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadAndBuildStaticMap()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="176"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:176</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pointerToGround"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>pointerToGround</b></span>
                        <a href="#pointerToGround"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>pointerToGround(e: PointerEvent)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="163"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:163</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>e</td>
                                            <td>
                                                        <code>PointerEvent</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>THREE.Vector3 | null</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setTargetXZ"></a>
                    <span class="name">
                        <span ><b>setTargetXZ</b></span>
                        <a href="#setTargetXZ"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>setTargetXZ(targetX: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, targetZ: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="335"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:335</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Minimap API: recenter map to world-space XZ point.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>targetX</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>targetZ</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="update"></a>
                    <span class="name">
                        <span ><b>update</b></span>
                        <a href="#update"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>update(_dt: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, _elapsed: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="75"
                                    class="link-to-prism">src/app/three/scenes/hex-world-map.scene.ts:75</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>_dt</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>_elapsed</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>





    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import * as THREE from &#x27;three&#x27;;
import { disposeObject3D } from &#x27;../core/three-dispose&#x27;;
import { ThreeContext, ThreeSceneController, ThreeSize } from &#x27;../core/three-scene-controller&#x27;;
import { zoneTypeColor } from &#x27;./zone-type-palette&#x27;;

/**
 * A simple &quot;world map&quot; prototype: big bright-green hex grid on black background with drag-pan.
 * Camera is tilted to mimic a Google-Earth style 2.5D perspective while staying on a flat plane.
 */
export class HexWorldMapScene implements ThreeSceneController {
  private scene!: THREE.Scene;
  private camera!: THREE.PerspectiveCamera;
  private canvas!: HTMLCanvasElement;

  private readonly raycaster &#x3D; new THREE.Raycaster();
  private readonly ground &#x3D; new THREE.Plane(new THREE.Vector3(0, 1, 0), 0);
  private readonly target &#x3D; new THREE.Vector3(0, 0, 0);

  private dragging &#x3D; false;
  private dragLastPoint &#x3D; new THREE.Vector3();
  private dragPointerId: number | null &#x3D; null;

  private readonly zoomMinDistance &#x3D; 20;
  private readonly zoomMaxDistance &#x3D; 220;

  private hexLines?: THREE.LineSegments;
  private labelsGroup?: THREE.Group;
  private iconMaterials &#x3D; new Map&lt;number, THREE.SpriteMaterial&gt;(); // zoneTypeId -&gt; material
  private zoneIdToTypeId &#x3D; new Map&lt;number, number&gt;();

  private onPointerDown?: (e: PointerEvent) &#x3D;&gt; void;
  private onPointerMove?: (e: PointerEvent) &#x3D;&gt; void;
  private onPointerUp?: (e: PointerEvent) &#x3D;&gt; void;
  private onWheel?: (e: WheelEvent) &#x3D;&gt; void;

  createScene(): THREE.Scene {
    const scene &#x3D; new THREE.Scene();
    scene.background &#x3D; new THREE.Color(0x000000);
    this.scene &#x3D; scene;
    return scene;
  }

  createCamera(_size: ThreeSize): THREE.Camera {
    const camera &#x3D; new THREE.PerspectiveCamera(50, 1, 0.1, 5000);
    // Tilted, &quot;google earth-ish&quot; view onto XZ plane
    // Slightly more top-down so tile icons stay visually &quot;inside&quot; the hexes.
    camera.position.set(0, 55, 55);
    camera.lookAt(this.target);
    this.camera &#x3D; camera;
    return camera;
  }

  init(ctx: ThreeContext): void {
    this.canvas &#x3D; ctx.canvas;

    // Load static map and render tiles with zoneId labels.
    // (Fallback: if fetch fails, we&#x27;ll render a small local grid.)
    void this.loadAndBuildStaticMap().catch(() &#x3D;&gt; {
      this.buildFallbackGrid();
    });

    // Input: drag-pan on the ground plane
    this.onPointerDown &#x3D; (e) &#x3D;&gt; this.handlePointerDown(e);
    this.onPointerMove &#x3D; (e) &#x3D;&gt; this.handlePointerMove(e);
    this.onPointerUp &#x3D; (e) &#x3D;&gt; this.handlePointerUp(e);
    this.onWheel &#x3D; (e) &#x3D;&gt; this.handleWheel(e);

    this.canvas.addEventListener(&#x27;pointerdown&#x27;, this.onPointerDown, { passive: false });
    this.canvas.addEventListener(&#x27;pointermove&#x27;, this.onPointerMove, { passive: false });
    this.canvas.addEventListener(&#x27;wheel&#x27;, this.onWheel, { passive: false });
    window.addEventListener(&#x27;pointerup&#x27;, this.onPointerUp, { passive: true });
    window.addEventListener(&#x27;pointercancel&#x27;, this.onPointerUp, { passive: true });
  }

  update(_dt: number, _elapsed: number): void {
    // no per-frame animation for now
  }

  dispose(): void {
    if (this.onPointerDown) this.canvas.removeEventListener(&#x27;pointerdown&#x27;, this.onPointerDown);
    if (this.onPointerMove) this.canvas.removeEventListener(&#x27;pointermove&#x27;, this.onPointerMove);
    if (this.onWheel) this.canvas.removeEventListener(&#x27;wheel&#x27;, this.onWheel);
    if (this.onPointerUp) {
      window.removeEventListener(&#x27;pointerup&#x27;, this.onPointerUp);
      window.removeEventListener(&#x27;pointercancel&#x27;, this.onPointerUp);
    }

    if (this.hexLines) disposeObject3D(this.hexLines);
    this.hexLines &#x3D; undefined;
    if (this.labelsGroup) disposeObject3D(this.labelsGroup);
    this.labelsGroup &#x3D; undefined;
    this.iconMaterials.forEach((m) &#x3D;&gt; {
      m.map?.dispose();
      m.dispose();
    });
    this.iconMaterials.clear();
  }

  private handlePointerDown(e: PointerEvent): void {
    // left button only
    if (e.button !&#x3D;&#x3D; 0) return;
    const hit &#x3D; this.pointerToGround(e);
    if (!hit) return;

    this.dragging &#x3D; true;
    this.dragPointerId &#x3D; e.pointerId;
    this.dragLastPoint.copy(hit);

    try {
      this.canvas.setPointerCapture(e.pointerId);
    } catch {
      // ignore; not supported in some contexts
    }

    e.preventDefault();
  }

  private handlePointerMove(e: PointerEvent): void {
    if (!this.dragging) return;
    if (this.dragPointerId !&#x3D; null &amp;&amp; e.pointerId !&#x3D;&#x3D; this.dragPointerId) return;

    const hit &#x3D; this.pointerToGround(e);
    if (!hit) return;

    // Move camera+target opposite to cursor motion for &quot;grab map&quot; feel.
    const delta &#x3D; hit.clone().sub(this.dragLastPoint);
    this.dragLastPoint.copy(hit);

    this.target.sub(delta);
    this.camera.position.sub(delta);
    this.camera.lookAt(this.target);

    e.preventDefault();
  }

  private handlePointerUp(e: PointerEvent): void {
    if (this.dragPointerId !&#x3D; null &amp;&amp; e.pointerId !&#x3D;&#x3D; this.dragPointerId) return;
    this.dragging &#x3D; false;
    this.dragPointerId &#x3D; null;
  }

  private handleWheel(e: WheelEvent): void {
    // Scroll down &#x3D;&gt; zoom out; scroll up &#x3D;&gt; zoom in
    const delta &#x3D; Math.sign(e.deltaY);
    if (delta &#x3D;&#x3D;&#x3D; 0) return;

    // Dolly along the view vector (camera -&gt; target), keeping the same tilt.
    const viewDir &#x3D; this.camera.position.clone().sub(this.target); // from target to camera
    const dist &#x3D; viewDir.length();
    if (dist &lt;&#x3D; 0.0001) return;

    // Use an exponential step for smooth zooming.
    const zoomFactor &#x3D; Math.pow(1.08, delta); // delta&gt;0 zoom out, delta&lt;0 zoom in
    const nextDist &#x3D; THREE.MathUtils.clamp(dist * zoomFactor, this.zoomMinDistance, this.zoomMaxDistance);

    viewDir.normalize().multiplyScalar(nextDist);
    this.camera.position.copy(this.target).add(viewDir);
    this.camera.lookAt(this.target);

    e.preventDefault();
  }

  private pointerToGround(e: PointerEvent): THREE.Vector3 | null {
    const rect &#x3D; this.canvas.getBoundingClientRect();
    const x &#x3D; ((e.clientX - rect.left) / rect.width) * 2 - 1;
    const y &#x3D; -(((e.clientY - rect.top) / rect.height) * 2 - 1);

    const ndc &#x3D; new THREE.Vector2(x, y);
    this.raycaster.setFromCamera(ndc, this.camera);

    const out &#x3D; new THREE.Vector3();
    const ok &#x3D; this.raycaster.ray.intersectPlane(this.ground, out);
    return ok ? out : null;
  }

  private async loadAndBuildStaticMap(): Promise&lt;void&gt; {
    const res &#x3D; await fetch(&#x27;/game-data/static-map.json&#x27;, { cache: &#x27;no-store&#x27; });
    if (!res.ok) throw new Error(&#x60;static-map fetch failed: ${res.status}&#x60;);
    const data &#x3D; (await res.json()) as StaticMap;
    await this.buildFromStaticMap(data);
  }

  private buildFallbackGrid(): void {
    const hexRadius &#x3D; 3.0;
    const radius &#x3D; 6; // hex-shaped local radius
    const tiles: StaticMapTile[] &#x3D; [];
    for (let q &#x3D; -radius; q &lt;&#x3D; radius; q++) {
      for (let r &#x3D; -radius; r &lt;&#x3D; radius; r++) {
        if (!inHexRadius(q, r, radius)) continue;
        tiles.push({ q, r, zoneId: 0 });
      }
    }
    this.buildTiles(hexRadius, tiles);
  }

  private async buildFromStaticMap(map: StaticMap): Promise&lt;void&gt; {
    const hexRadius &#x3D; 3.0;
    this.zoneIdToTypeId &#x3D; new Map(map.zones.map((z) &#x3D;&gt; [z.zoneId, z.zoneTypeId]));
    await this.buildTiles(hexRadius, map.tiles, map.zones);
  }

  private async buildTiles(hexRadius: number, tiles: StaticMapTile[], zones?: StaticMap[&#x27;zones&#x27;]): Promise&lt;void&gt; {
    // Remove previous visuals (if any)
    if (this.hexLines) {
      disposeObject3D(this.hexLines);
      this.scene.remove(this.hexLines);
      this.hexLines &#x3D; undefined;
    }
    if (this.labelsGroup) {
      disposeObject3D(this.labelsGroup);
      this.scene.remove(this.labelsGroup);
      this.labelsGroup &#x3D; undefined;
    }
    this.iconMaterials.forEach((m) &#x3D;&gt; {
      m.map?.dispose();
      m.dispose();
    });
    this.iconMaterials.clear();

    // Lines
    const geometry &#x3D; buildMergedHexEdgeGeometryFromTiles(hexRadius, tiles);
    const material &#x3D; new THREE.LineBasicMaterial({ color: 0x00ff00, linewidth: 1 });
    const lines &#x3D; new THREE.LineSegments(geometry, material);
    lines.frustumCulled &#x3D; true;
    this.scene.add(lines);
    this.hexLines &#x3D; lines;

    // Icons (zoneId -&gt; zoneTypeId comes from static map zones list)
    if (zones) this.zoneIdToTypeId &#x3D; new Map(zones.map((z) &#x3D;&gt; [z.zoneId, z.zoneTypeId]));

    // Preload all required icon materials once
    const typeIds &#x3D; new Set&lt;number&gt;();
    for (const t of tiles) {
      const typeId &#x3D; this.zoneIdToTypeId.get(t.zoneId) ?? 1;
      typeIds.add(typeId);
    }
    await Promise.all(
      [...typeIds].map(async (typeId) &#x3D;&gt; {
        await this.ensureIconMaterial(typeId);
      })
    );

    const labels &#x3D; new THREE.Group();
    labels.name &#x3D; &#x27;zone-icons&#x27;;

    for (const t of tiles) {
      const center &#x3D; axialToXZCenter(hexRadius, t.q, t.r);
      const typeId &#x3D; this.zoneIdToTypeId.get(t.zoneId) ?? 1;
      const sprite &#x3D; new THREE.Sprite(this.iconMaterials.get(typeId)!);
      sprite.position.set(center.x, 0.05, center.z);
      // fit inside hex tile
      sprite.scale.set(hexRadius * 1.55, hexRadius * 1.55, 1);
      labels.add(sprite);
    }

    this.scene.add(labels);
    this.labelsGroup &#x3D; labels;
  }

  private async ensureIconMaterial(zoneTypeId: number): Promise&lt;void&gt; {
    if (this.iconMaterials.has(zoneTypeId)) return;
    let tex: THREE.Texture;
    const color &#x3D; zoneTypeColor(zoneTypeId);
    try {
      tex &#x3D; await loadSvgIconAsHexMaskedTexture(&#x60;/zone-icons/${zoneTypeId}.svg&#x60;, color);
    } catch {
      // Fallback so missing/broken icons don&#x27;t result in invisible tiles
      tex &#x3D; makeFallbackTextTexture(String(zoneTypeId), color);
    }
    const mat &#x3D; new THREE.SpriteMaterial({
      map: tex,
      transparent: true,
      depthTest: true,
      depthWrite: false
    });
    this.iconMaterials.set(zoneTypeId, mat);
  }

  /**
   * Minimap API: current camera &quot;center&quot; (target) and viewport rectangle on the ground plane (y&#x3D;0).
   */
  getMinimapState(): {
    targetX: number;
    targetZ: number;
    cameraY: number;
    viewRect?: { minX: number; maxX: number; minZ: number; maxZ: number };
  } {
    const base &#x3D; { targetX: this.target.x, targetZ: this.target.z, cameraY: this.camera?.position.y ?? 0 };

    // Build an axis-aligned rectangle on the XZ plane that covers what&#x27;s visible in the main viewport.
    // We do this by intersecting the 4 screen-corner rays with the ground plane (y&#x3D;0) and taking the AABB.
    try {
      const corners &#x3D; [
        new THREE.Vector2(-1, -1),
        new THREE.Vector2(1, -1),
        new THREE.Vector2(1, 1),
        new THREE.Vector2(-1, 1)
      ];

      const pts: THREE.Vector3[] &#x3D; [];
      for (const ndc of corners) {
        this.raycaster.setFromCamera(ndc, this.camera);
        const out &#x3D; new THREE.Vector3();
        const ok &#x3D; this.raycaster.ray.intersectPlane(this.ground, out);
        if (ok) pts.push(out);
      }

      if (pts.length &gt;&#x3D; 2) {
        let minX &#x3D; Number.POSITIVE_INFINITY;
        let maxX &#x3D; Number.NEGATIVE_INFINITY;
        let minZ &#x3D; Number.POSITIVE_INFINITY;
        let maxZ &#x3D; Number.NEGATIVE_INFINITY;
        for (const p of pts) {
          minX &#x3D; Math.min(minX, p.x);
          maxX &#x3D; Math.max(maxX, p.x);
          minZ &#x3D; Math.min(minZ, p.z);
          maxZ &#x3D; Math.max(maxZ, p.z);
        }

        return {
          ...base,
          viewRect: { minX, maxX, minZ, maxZ }
        };
      }
    } catch {
      // If anything goes wrong (camera not ready, etc), just omit viewRect.
    }

    return base;
  }

  /**
   * Minimap API: recenter map to world-space XZ point.
   */
  setTargetXZ(targetX: number, targetZ: number): void {
    if (!this.camera) return;
    const offset &#x3D; this.camera.position.clone().sub(this.target);
    this.target.set(targetX, 0, targetZ);
    this.camera.position.copy(this.target).add(offset);
    this.camera.lookAt(this.target);
  }
}

type StaticMapTile &#x3D; { q: number; r: number; zoneId: number };
type StaticMap &#x3D; {
  version: number;
  coordSystem: &#x27;axial&#x27;;
  shape: { kind: &#x27;hex&#x27;; radius: number };
  zones: Array&lt;{ zoneId: number; name: string; zoneTypeId: number; levelRange: { min: number; max: number } }&gt;;
  tiles: StaticMapTile[];
};

function inHexRadius(q: number, r: number, radius: number): boolean {
  const x &#x3D; q;
  const z &#x3D; r;
  const y &#x3D; -x - z;
  return Math.max(Math.abs(x), Math.abs(y), Math.abs(z)) &lt;&#x3D; radius;
}

function axialToXZCenter(radius: number, q: number, r: number): { x: number; z: number } {
  // Pointy-top hex on XZ plane:
  // axial coords (q, r) -&gt; x,z
  // x &#x3D; sqrt(3) * radius * (q + r/2)
  // z &#x3D; 3/2 * radius * r
  const sqrt3 &#x3D; Math.sqrt(3);
  const x &#x3D; sqrt3 * radius * (q + r / 2);
  const z &#x3D; 1.5 * radius * r;
  return { x, z };
}

function buildMergedHexEdgeGeometryFromTiles(radius: number, tiles: StaticMapTile[]): THREE.BufferGeometry {
  const tileCount &#x3D; tiles.length;
  // 6 edges &#x3D;&gt; 6 segments &#x3D;&gt; 12 vertices per tile
  const vertsPerTile &#x3D; 12;
  const floatsPerVert &#x3D; 3;
  const positions &#x3D; new Float32Array(tileCount * vertsPerTile * floatsPerVert);

  // Precompute local hex segments (6 edges) centered at origin on XZ plane
  const local &#x3D; new Float32Array(vertsPerTile * floatsPerVert);
  const corners: THREE.Vector3[] &#x3D; [];
  for (let i &#x3D; 0; i &lt; 6; i++) {
    const angle &#x3D; (Math.PI / 180) * (60 * i - 30); // pointy-top
    corners.push(new THREE.Vector3(Math.cos(angle) * radius, 0, Math.sin(angle) * radius));
  }

  let li &#x3D; 0;
  for (let i &#x3D; 0; i &lt; 6; i++) {
    const a &#x3D; corners[i];
    const b &#x3D; corners[(i + 1) % 6];
    local[li++] &#x3D; a.x;
    local[li++] &#x3D; a.y;
    local[li++] &#x3D; a.z;
    local[li++] &#x3D; b.x;
    local[li++] &#x3D; b.y;
    local[li++] &#x3D; b.z;
  }

  let offset &#x3D; 0;
  for (const t of tiles) {
    const center &#x3D; axialToXZCenter(radius, t.q, t.r);
    for (let i &#x3D; 0; i &lt; local.length; i +&#x3D; 3) {
      positions[offset++] &#x3D; local[i] + center.x;
      positions[offset++] &#x3D; local[i + 1];
      positions[offset++] &#x3D; local[i + 2] + center.z;
    }
  }

  const geo &#x3D; new THREE.BufferGeometry();
  geo.setAttribute(&#x27;position&#x27;, new THREE.BufferAttribute(positions, 3));
  geo.computeBoundingSphere();
  return geo;
}

async function loadSvgIconAsHexMaskedTexture(url: string, color: string): Promise&lt;THREE.Texture&gt; {
  const res &#x3D; await fetch(url, { cache: &#x27;force-cache&#x27; });
  if (!res.ok) throw new Error(&#x60;icon fetch failed: ${res.status}&#x60;);
  const svg &#x3D; await res.text();
  const coloredSvg &#x3D; forceSvgFill(svg, color);

  const blob &#x3D; new Blob([coloredSvg], { type: &#x27;image/svg+xml&#x27; });
  const blobUrl &#x3D; URL.createObjectURL(blob);
  try {
    const img &#x3D; await loadImage(blobUrl);
    return makeHexMaskedTexture(img);
  } finally {
    URL.revokeObjectURL(blobUrl);
  }
}

function loadImage(src: string): Promise&lt;HTMLImageElement&gt; {
  return new Promise((resolve, reject) &#x3D;&gt; {
    const img &#x3D; new Image();
    img.onload &#x3D; () &#x3D;&gt; resolve(img);
    img.onerror &#x3D; (e) &#x3D;&gt; reject(e);
    img.src &#x3D; src;
  });
}

function forceSvgFill(svg: string, color: string): string {
  // Many icon SVGs rely on default fill (black) or currentColor; on our black map that becomes invisible.
  // This best-effort rewrite forces a solid fill color.
  let out &#x3D; svg;

  // Replace explicit currentColor fills
  out &#x3D; out.replace(/fill\s*&#x3D;\s*[&quot;&#x27;]currentColor[&quot;&#x27;]/gi, &#x60;fill&#x3D;&quot;${color}&quot;&#x60;);

  // Inject/override a top-level fill attribute on &lt;svg ...&gt;
  out &#x3D; out.replace(/&lt;svg\b([^&gt;]*)&gt;/i, (match, attrs) &#x3D;&gt; {
    // Remove existing fill attrs so we can force ours
    const cleaned &#x3D; String(attrs).replace(/\sfill\s*&#x3D;\s*[&quot;&#x27;][^&quot;&#x27;]*[&quot;&#x27;]/gi, &#x27;&#x27;);
    return &#x60;&lt;svg${cleaned} fill&#x3D;&quot;${color}&quot;&gt;&#x60;;
  });

  return out;
}

function makeHexMaskedTexture(img: HTMLImageElement): THREE.Texture {
  const size &#x3D; 128;
  const canvas &#x3D; document.createElement(&#x27;canvas&#x27;);
  canvas.width &#x3D; size;
  canvas.height &#x3D; size;
  const ctx &#x3D; canvas.getContext(&#x27;2d&#x27;);
  if (!ctx) {
    const tex &#x3D; new THREE.Texture();
    tex.needsUpdate &#x3D; true;
    return tex;
  }

  ctx.clearRect(0, 0, size, size);

  // Hex clip mask (pointy-top), with padding so it fits inside the tile visually.
  const pad &#x3D; 6;
  const cx &#x3D; size / 2;
  const cy &#x3D; size / 2;
  const r &#x3D; size / 2 - pad;
  ctx.save();
  ctx.beginPath();
  for (let i &#x3D; 0; i &lt; 6; i++) {
    const angle &#x3D; (Math.PI / 180) * (60 * i - 30);
    const x &#x3D; cx + Math.cos(angle) * r;
    const y &#x3D; cy + Math.sin(angle) * r;
    if (i &#x3D;&#x3D;&#x3D; 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  }
  ctx.closePath();
  ctx.clip();

  // Draw icon centered, scale to fit
  const iconPad &#x3D; 18;
  ctx.drawImage(img, iconPad, iconPad, size - iconPad * 2, size - iconPad * 2);
  ctx.restore();

  // Optional subtle hex outline to blend with grid
  ctx.save();
  ctx.beginPath();
  for (let i &#x3D; 0; i &lt; 6; i++) {
    const angle &#x3D; (Math.PI / 180) * (60 * i - 30);
    const x &#x3D; cx + Math.cos(angle) * r;
    const y &#x3D; cy + Math.sin(angle) * r;
    if (i &#x3D;&#x3D;&#x3D; 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  }
  ctx.closePath();
  ctx.lineWidth &#x3D; 3;
  ctx.strokeStyle &#x3D; &#x27;rgba(0,255,0,0.18)&#x27;;
  ctx.stroke();
  ctx.restore();

  const tex &#x3D; new THREE.CanvasTexture(canvas);
  tex.colorSpace &#x3D; THREE.SRGBColorSpace;
  tex.minFilter &#x3D; THREE.LinearFilter;
  tex.magFilter &#x3D; THREE.LinearFilter;
  tex.generateMipmaps &#x3D; false;
  tex.needsUpdate &#x3D; true;
  return tex;
}

function makeFallbackTextTexture(text: string, color: string): THREE.Texture {
  const canvas &#x3D; document.createElement(&#x27;canvas&#x27;);
  canvas.width &#x3D; 128;
  canvas.height &#x3D; 128;
  const ctx &#x3D; canvas.getContext(&#x27;2d&#x27;);
  if (!ctx) {
    const tex &#x3D; new THREE.Texture();
    tex.needsUpdate &#x3D; true;
    return tex;
  }

  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.textAlign &#x3D; &#x27;center&#x27;;
  ctx.textBaseline &#x3D; &#x27;middle&#x27;;
  ctx.font &#x3D; &#x27;bold 56px system-ui, -apple-system, Segoe UI, Roboto, Arial&#x27;;

  ctx.lineWidth &#x3D; 10;
  ctx.strokeStyle &#x3D; &#x27;rgba(0,0,0,0.7)&#x27;;
  ctx.strokeText(text, canvas.width / 2, canvas.height / 2);

  ctx.fillStyle &#x3D; color;
  ctx.fillText(text, canvas.width / 2, canvas.height / 2);

  const tex &#x3D; new THREE.CanvasTexture(canvas);
  tex.colorSpace &#x3D; THREE.SRGBColorSpace;
  tex.minFilter &#x3D; THREE.LinearFilter;
  tex.magFilter &#x3D; THREE.LinearFilter;
  tex.generateMipmaps &#x3D; false;
  tex.needsUpdate &#x3D; true;
  return tex;
}


</code></pre>
    </div>
</div>









                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'HexWorldMapScene.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
